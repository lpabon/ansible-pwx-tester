System created with kubeup and where `inventory` is a link to the
vagrant inventory file:

```
/path/to/VM/.vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory
```

Which could have the following content:

```
# Generated by Vagrant

lpabon-k8s-1-node1 ansible_host=192.168.121.159 ansible_port=22 ansible_user='vagrant' ansible_ssh_private_key_file='/home/lpabon/.vagrant.d/insecure_private_key'
lpabon-k8s-1-master ansible_host=192.168.121.21 ansible_port=22 ansible_user='vagrant' ansible_ssh_private_key_file='/home/lpabon/.vagrant.d/insecure_private_key'
lpabon-k8s-1-node0 ansible_host=192.168.121.2 ansible_port=22 ansible_user='vagrant' ansible_ssh_private_key_file='/home/lpabon/.vagrant.d/insecure_private_key'
lpabon-k8s-1-node2 ansible_host=192.168.121.28 ansible_port=22 ansible_user='vagrant' ansible_ssh_private_key_file='/home/lpabon/.vagrant.d/insecure_private_key'

[master]
lpabon-k8s-1-master

[nodes]
lpabon-k8s-1-node0
lpabon-k8s-1-node1
lpabon-k8s-1-node2

[portworx]
lpabon-k8s-1-node0
```

## Usage

* Update `global_vars.yml` accordingly
* Create an inventory file with your systems and have one section called
  `portworx` with a single node
* Run `ansible-playbook -i inventory site.yml`

## Sample run
```
$ ansible-playbook -i inventory site.yml

PLAY [portworx] *********************************************************************************************************************************************************************

TASK [Gathering Facts] **************************************************************************************************************************************************************
ok: [lpabon-k8s-1-node0]

TASK [common : install required packages] *******************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]

TASK [kubernetes : get token from kubernetes] ***************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]

TASK [kubernetes : set_fact] ********************************************************************************************************************************************************
ok: [lpabon-k8s-1-node0]
  
TASK [volume : checking cluster status] *********************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]
  
TASK [volume : setup pxctl context] *************************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]
  
TASK [volume : check volume exists] *************************************************************************************************************************************************
fatal: [lpabon-k8s-1-node0]: FAILED! => {"changed": true, "cmd": "/opt/pwx/bin/pxctl volume list | grep myvol", "delta": "0:00:00.085554", "end": "2020-02-28 18:55:42.620210", "msg": "non-zero return code", "rc": 1, "start": "2020-02-28 18:55:42.534656", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
  
TASK [volume : volume create] *******************************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]
  
TASK [volume : volume inspect] ******************************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]
  
TASK [volume : delete volume] *******************************************************************************************************************************************************
changed: [lpabon-k8s-1-node0]
  
PLAY RECAP **************************************************************************************************************************************************************************
lpabon-k8s-1-node0         : ok=10   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
```
